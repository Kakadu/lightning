
release: 
	$(MAKE) -C src

debug:
	$(MAKE) -C src debug

%.cmo: 
	$(MAKE) -C src $@


INSTALL_OPTS = 
install: release
	cp $(META) META
	sudo $(OCAMLFIND) install lightning META src/lightning.cma src/dlllightning.so src/lightning.cmxa src/lightning.a src/liblightning.a src/*.cmi src/*.mli src/containers/*.cmi src/containers/*.mli src/syntax/pa_prop.cmo src/syntax/pa_debug.cmo $(INSTALL_OPTS) 

uninstall:
	sudo $(OCAMLFIND) remove lightning

reinstall: uninstall install

.PHONY: install uninstall reinstall 

doc:
	$(MAKE) -C src doc

clean: 
	$(MAKE) -C src clean
