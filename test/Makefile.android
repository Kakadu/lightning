OCAMLFIND = ocamlfind -toolchain android
OCAMLOPT = $(OCAMLFIND) ocamlopt
OCAMLC = $(OCAMLFIND) ocamlc
include Makefile.common
include Makefile.in

so: example.so
	cp test.so android/libs/armeabi-v7a/libtest.so
	cd android && ant debug
	

example.so: $(MLXFILES) example.cmx
	$(OCAMLOPT) -verbose -o test.so  -g  \
	-I ../src ../src/lightning.cmxa  $(OAUTHX) $(SOCIALX) $(MOBS) $(MLXFILES) ../src/social/facebook/fbconnect.cmxa example.cmx \
	-package extlib,xmlm,ojson,bigarray  -linkpkg -cclib "-L../src/android/libpng" -cclib "-L../src/android/libjpeg" -cclib "-L../src/android/libcurl" -cclib "-L../src/social/facebook" -output-obj

clean::
	rm -f LightTest/*.o LighTest/*.so 


.DEFAULT_GOAL = so
